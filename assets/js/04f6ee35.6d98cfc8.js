"use strict";(self.webpackChunktech_sphere=self.webpackChunktech_sphere||[]).push([[6477],{1484:(n,e,i)=>{i.d(e,{A:()=>t});const t=i.p+"assets/images/1744028799715-e3323ae63cc49371df9a6b3859477681.png"},2957:n=>{n.exports=JSON.parse('{"permalink":"/tech-sphere/blog/cqrs","editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/2025-04-07-cqrs.md","source":"@site/blog/2025-04-07-cqrs.md","title":"CQRS (Command Query Responsibility Segregation)","description":"CQRS (Command Query Responsibility Segregation) l\xe0 m\u1ed9t m\u1eabu ki\u1ebfn tr\xfac gi\xfap t\xe1ch bi\u1ec7t r\xf5 r\xe0ng gi\u1eefa ph\u1ea7n \u0111\u1ecdc d\u1eef li\u1ec7u (Query) v\xe0 ghi d\u1eef li\u1ec7u (Command) trong \u1ee9ng d\u1ee5ng. \u0110i\u1ec1u n\xe0y gi\xfap c\u1ea3i thi\u1ec7n hi\u1ec7u n\u0103ng, kh\u1ea3 n\u0103ng m\u1edf r\u1ed9ng v\xe0 t\xednh b\u1ea3o tr\xec c\u1ee7a h\u1ec7 th\u1ed1ng.","date":"2025-04-07T00:00:00.000Z","tags":[{"inline":true,"label":"cqrs","permalink":"/tech-sphere/blog/tags/cqrs"},{"inline":true,"label":"database","permalink":"/tech-sphere/blog/tags/database"}],"readingTime":2.26,"hasTruncateMarker":false,"authors":[{"name":"B\xf9i Quang \u0110\u1ee9c","title":"CV ph\xe1t tri\u1ec3n \u1ee9ng d\u1ee5ng | P.PTUD giao d\u1ecbch CN & QTNB - Tr\u1ee5 s\u1edf ch\xednh VietinBank","url":"https://github.com/ducbq1","page":{"permalink":"/tech-sphere/blog/authors/ducbq-1"},"socials":{"x":"https://x.com/ducbq1","github":"https://github.com/ducbq1"},"imageURL":"/tech-sphere/avatar/ducbq1.jpg","key":"ducbq1"}],"frontMatter":{"slug":"cqrs","title":"CQRS (Command Query Responsibility Segregation)","authors":["ducbq1"],"tags":["cqrs","database"]},"unlisted":false,"nextItem":{"title":"T\u1ed5ng quan v\u1ec1 Proxy, Reverse Proxy vs. Forward Proxy, Forward Port, Load Balancer","permalink":"/tech-sphere/blog/proxy"}}')},4371:(n,e,i)=>{i.d(e,{A:()=>t});const t=i.p+"assets/images/1744028749182-7c402764237718db2ed4a9836e3fa40a.png"},4963:(n,e,i)=>{i.d(e,{A:()=>t});const t=i.p+"assets/images/1744028693803-7fd3a3681c194ea5ab07725b9d597e0d.png"},8453:(n,e,i)=>{i.d(e,{R:()=>h,x:()=>c});var t=i(6540);const r={},s=t.createContext(r);function h(n){const e=t.useContext(s);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:h(n.components),t.createElement(s.Provider,{value:e},n.children)}},9964:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>l,contentTitle:()=>c,default:()=>o,frontMatter:()=>h,metadata:()=>t,toc:()=>d});var t=i(2957),r=i(4848),s=i(8453);const h={slug:"cqrs",title:"CQRS (Command Query Responsibility Segregation)",authors:["ducbq1"],tags:["cqrs","database"]},c="\ud83d\udcd8 CQRS (Command Query Responsibility Segregation)",l={authorsImageUrls:[void 0]},d=[{value:"\ud83d\udccc 1. T\u1ed5ng Quan",id:"-1-t\u1ed5ng-quan",level:2},{value:"\u2699\ufe0f 2. Ki\u1ebfn Tr\xfac CQRS",id:"\ufe0f-2-ki\u1ebfn-tr\xfac-cqrs",level:2},{value:"\u2705 3. \u01afu \u0110i\u1ec3m",id:"-3-\u01b0u-\u0111i\u1ec3m",level:2},{value:"\u26a0\ufe0f 4. Nh\u01b0\u1ee3c \u0110i\u1ec3m",id:"\ufe0f-4-nh\u01b0\u1ee3c-\u0111i\u1ec3m",level:2},{value:"\ud83d\udee0\ufe0f 5. Khi N\xe0o D\xf9ng CQRS?",id:"\ufe0f-5-khi-n\xe0o-d\xf9ng-cqrs",level:2},{value:"\ud83d\udd01 6. So S\xe1nh V\u1edbi CRUD",id:"-6-so-s\xe1nh-v\u1edbi-crud",level:2},{value:"\ud83d\udd04 7. K\u1ebft H\u1ee3p V\u1edbi Event Sourcing",id:"-7-k\u1ebft-h\u1ee3p-v\u1edbi-event-sourcing",level:2},{value:"\ud83d\udcda T\xe0i Li\u1ec7u Tham Kh\u1ea3o",id:"-t\xe0i-li\u1ec7u-tham-kh\u1ea3o",level:2}];function a(n){const e={a:"a",blockquote:"blockquote",code:"code",em:"em",h2:"h2",hr:"hr",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(e.p,{children:["CQRS (Command Query Responsibility Segregation) l\xe0 m\u1ed9t m\u1eabu ki\u1ebfn tr\xfac gi\xfap ",(0,r.jsx)(e.strong,{children:"t\xe1ch bi\u1ec7t r\xf5 r\xe0ng gi\u1eefa ph\u1ea7n \u0111\u1ecdc d\u1eef li\u1ec7u (Query)"})," v\xe0 ",(0,r.jsx)(e.strong,{children:"ghi d\u1eef li\u1ec7u (Command)"})," trong \u1ee9ng d\u1ee5ng. \u0110i\u1ec1u n\xe0y gi\xfap c\u1ea3i thi\u1ec7n hi\u1ec7u n\u0103ng, kh\u1ea3 n\u0103ng m\u1edf r\u1ed9ng v\xe0 t\xednh b\u1ea3o tr\xec c\u1ee7a h\u1ec7 th\u1ed1ng."]}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.h2,{id:"-1-t\u1ed5ng-quan",children:"\ud83d\udccc 1. T\u1ed5ng Quan"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Command"})," : Ghi d\u1eef li\u1ec7u (Insert, Update, Delete)"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Query"})," : \u0110\u1ecdc d\u1eef li\u1ec7u (SELECT)"]}),"\n"]}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"T\xe1ch bi\u1ec7t \u0111\u1ec3 d\u1ec5 t\u1ed1i \u01b0u h\xf3a t\u1eebng ph\u1ea7n cho m\u1ee5c ti\xeau kh\xe1c nhau."}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{alt:"1744028749182",src:i(4371).A+"",width:"1179",height:"1008"})}),"\n",(0,r.jsx)(e.h2,{id:"\ufe0f-2-ki\u1ebfn-tr\xfac-cqrs",children:"\u2699\ufe0f 2. Ki\u1ebfn Tr\xfac CQRS"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"[Client]\n   \u2502\n   \u251c\u2500\u2500> [Command API] \u2500\u2500> [Command Handler] \u2500\u2500> [Write DB]\n   \u2502\n   \u2514\u2500\u2500> [Query API] \u2500\u2500\u2500\u2500> [Query Handler] \u2500\u2500\u2500> [Read DB]\n"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Write DB"})," c\xf3 th\u1ec3 l\xe0 m\u1ed9t schema ho\u1eb7c h\u1ec7 th\u1ed1ng ri\xeang bi\u1ec7t."]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Read DB"})," c\xf3 th\u1ec3 \u0111\u01b0\u1ee3c t\u1ed1i \u01b0u h\xf3a cho hi\u1ec7u su\u1ea5t truy v\u1ea5n."]}),"\n"]}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.h2,{id:"-3-\u01b0u-\u0111i\u1ec3m",children:"\u2705 3. \u01afu \u0110i\u1ec3m"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\ud83d\udd04 T\xe1ch bi\u1ec7t r\xf5 r\xe0ng x\u1eed l\xfd \u0111\u1ecdc v\xe0 ghi"}),"\n",(0,r.jsx)(e.li,{children:"\ud83d\ude80 T\u1ed1i \u01b0u hi\u1ec7u n\u0103ng \u0111\u1ecdc/ghi \u0111\u1ed9c l\u1eadp"}),"\n",(0,r.jsx)(e.li,{children:"\ud83d\udd27 D\u1ec5 m\u1edf r\u1ed9ng, d\u1ec5 scale t\u1eebng ph\u1ea7n"}),"\n",(0,r.jsx)(e.li,{children:"\ud83d\udd10 T\u0103ng c\u01b0\u1eddng b\u1ea3o m\u1eadt v\xe0 ki\u1ec3m so\xe1t"}),"\n"]}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.h2,{id:"\ufe0f-4-nh\u01b0\u1ee3c-\u0111i\u1ec3m",children:"\u26a0\ufe0f 4. Nh\u01b0\u1ee3c \u0110i\u1ec3m"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\ud83e\udde9 T\u0103ng \u0111\u1ed9 ph\u1ee9c t\u1ea1p h\u1ec7 th\u1ed1ng"}),"\n",(0,r.jsx)(e.li,{children:"\ud83d\udd04 C\u1ea7n \u0111\u1ed3ng b\u1ed9 gi\u1eefa Read DB v\xe0 Write DB (eventual consistency)"}),"\n",(0,r.jsx)(e.li,{children:"\ud83e\uddea Ph\u1ee9c t\u1ea1p h\u01a1n khi test v\xe0 debug"}),"\n"]}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.h2,{id:"\ufe0f-5-khi-n\xe0o-d\xf9ng-cqrs",children:"\ud83d\udee0\ufe0f 5. Khi N\xe0o D\xf9ng CQRS?"}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"T\xecnh hu\u1ed1ng"}),(0,r.jsx)(e.th,{children:"C\xf3 n\xean d\xf9ng CQRS?"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"H\u1ec7 th\u1ed1ng \u0111\u01a1n gi\u1ea3n"}),(0,r.jsx)(e.td,{children:"\u274c Kh\xf4ng c\u1ea7n thi\u1ebft"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"\u1ee8ng d\u1ee5ng c\xf3 nhi\u1ec1u \u0111\u1ecdc h\u01a1n ghi"}),(0,r.jsx)(e.td,{children:"\u2705 Ph\xf9 h\u1ee3p"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"Y\xeau c\u1ea7u hi\u1ec7u n\u0103ng cao"}),(0,r.jsx)(e.td,{children:"\u2705 N\xean d\xf9ng"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"D\u1eef li\u1ec7u ph\u1ee9c t\u1ea1p v\xe0 thay \u0111\u1ed5i th\u01b0\u1eddng xuy\xean"}),(0,r.jsx)(e.td,{children:"\u2705 R\u1ea5t ph\xf9 h\u1ee3p"})]})]})]}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.h2,{id:"-6-so-s\xe1nh-v\u1edbi-crud",children:"\ud83d\udd01 6. So S\xe1nh V\u1edbi CRUD"}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"Ti\xeau ch\xed"}),(0,r.jsx)(e.th,{children:"CRUD"}),(0,r.jsx)(e.th,{children:"CQRS"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"G\u1ed9p chung x\u1eed l\xfd"}),(0,r.jsx)(e.td,{children:"\u2705"}),(0,r.jsx)(e.td,{children:"\u274c"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"T\xe1ch bi\u1ec7t x\u1eed l\xfd"}),(0,r.jsx)(e.td,{children:"\u274c"}),(0,r.jsx)(e.td,{children:"\u2705"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"\u0110\u01a1n gi\u1ea3n"}),(0,r.jsx)(e.td,{children:"\u2705"}),(0,r.jsx)(e.td,{children:"\u274c"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"Hi\u1ec7u n\u0103ng cao"}),(0,r.jsx)(e.td,{children:"\u274c"}),(0,r.jsx)(e.td,{children:"\u2705"})]})]})]}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.h2,{id:"-7-k\u1ebft-h\u1ee3p-v\u1edbi-event-sourcing",children:"\ud83d\udd04 7. K\u1ebft H\u1ee3p V\u1edbi Event Sourcing"}),"\n",(0,r.jsxs)(e.p,{children:["CQRS th\u01b0\u1eddng \u0111\u01b0\u1ee3c k\u1ebft h\u1ee3p v\u1edbi ",(0,r.jsx)(e.strong,{children:"Event Sourcing"})," \u0111\u1ec3 l\u01b0u tr\u1eef to\xe0n b\u1ed9 c\xe1c s\u1ef1 ki\u1ec7n x\u1ea3y ra thay v\xec tr\u1ea1ng th\xe1i hi\u1ec7n t\u1ea1i. \u0110i\u1ec1u n\xe0y gi\xfap:"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Kh\xf4i ph\u1ee5c l\u1ea1i d\u1eef li\u1ec7u \u1edf b\u1ea5t k\u1ef3 th\u1eddi \u0111i\u1ec3m n\xe0o"}),"\n",(0,r.jsx)(e.li,{children:"Audit d\u1ec5 d\xe0ng"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{alt:"1744028799715",src:i(1484).A+"",width:"1473",height:"774"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{alt:"1744028693803",src:i(4963).A+"",width:"825",height:"339"})}),"\n",(0,r.jsx)(e.h2,{id:"-t\xe0i-li\u1ec7u-tham-kh\u1ea3o",children:"\ud83d\udcda T\xe0i Li\u1ec7u Tham Kh\u1ea3o"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://martinfowler.com/bliki/CQRS.html",children:"Martin Fowler on CQRS"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://docs.microsoft.com/en-us/azure/architecture/patterns/cqrs",children:"Microsoft CQRS Docs"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://eventstore.com/cqrs/",children:"EventStore CQRS"})}),"\n"]}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsxs)(e.p,{children:["\ud83e\udde0 ",(0,r.jsx)(e.em,{children:"CQRS l\xe0 c\xf4ng c\u1ee5 m\u1ea1nh m\u1ebd, nh\u01b0ng kh\xf4ng ph\u1ea3i l\xfac n\xe0o c\u0169ng c\u1ea7n thi\u1ebft. H\xe3y c\xe2n nh\u1eafc k\u1ef9 tr\u01b0\u1edbc khi \xe1p d\u1ee5ng."})]}),"\n"]})]})}function o(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(a,{...n})}):a(n)}}}]);